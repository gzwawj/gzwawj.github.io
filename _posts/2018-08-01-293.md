---
layout: post
title:  ubuntu16.04安装最新版docker、docker-compose、docker-machine
date:   2018/08/01 17:07
categories:    应用工具
tags: ubuntu linux docker 
excerpt: 安装前说明:  本文将介绍在ubuntu16.04系统下安装和升级docker、docker-compose、docker-machine。  docker：有两个版本:docker-ce(社区版)和docker-ee(企业版)。  笔者这里介绍安装或升级的是最新版docker-ce(社区版)。  参考官网地址：https://docs.docker.com/engine/installation
comment: true
---
* content
{:top}

<h4>安装前说明:</h4>

本文将介绍在ubuntu16.04系统下安装和升级<code>docker</code>、<code>docker-compose</code>、<code>docker-machine</code>。

<strong>docker</strong>：有两个版本:<code>docker-ce</code>(社区版)和<code>docker-ee</code>(企业版)。

笔者这里介绍安装或升级的是最新版<code>docker-ce</code>(社区版)。

<strong>参考官网地址</strong>：https://docs.docker.com/engine/installation/linux/docker-ce/ubuntu/#os-requirements

<strong>docker-compse</strong>：可运行和管理多个docker容器。

<strong>docker-machine</strong>：docker官方提供的docker管理工具。可管理多个docker主机，可搭建swarm集群。

<h4>一、docker安装</h4>

<h5>1，卸载旧版本docker</h5>

全新安装时，无需执行该步骤

<pre><code class="language-shell ">$ sudo apt-get remove docker docker-engine docker.io
</code></pre>

<h5>2，更新系统软件</h5>

<pre><code class="language-shell ">$ sudo apt-get update
</code></pre>

<h5>3，安装依赖包</h5>

<pre><code class="language-shell ">$ sudo apt-get install \
    apt-transport-https \
    ca-certificates \
    curl \
    software-properties-common
</code></pre>

<h5>4，添加官方密钥</h5>

执行该命令时，如遇到长时间没有响应说明网络连接不到docker网站，需要使用代-理进行。

<pre><code class="language-shell ">$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
</code></pre>

显示OK,表示添加成功.

<h5>5，添加仓库</h5>

<pre><code class="language-shell ">$ sudo add-apt-repository \
   "deb [arch=amd64] https://download.docker.com/linux/ubuntu \
   $(lsb_release -cs) \
   stable"
</code></pre>

<h5>6，再次更新软件</h5>

经实践，这一步不能够省略，我们需要再次把软件更新到最新，否则下一步有可能会报错。

<pre><code class="language-shell ">$ sudo apt-get update
</code></pre>

<h5>7，安装docker</h5>

如果想指定安装某一版本，可使用 sudo apt-get install docker-ce=<VERSION>  命令，把<VERSION>替换为具体版本即可。

以下命令没有指定版本，默认就会安装最新版

<pre><code class="language-shell ">$ sudo apt-get install docker-ce
</code></pre>

<h5>8，查看docker版本</h5>

<pre><code class="language-shell ">$ docker -v
</code></pre>

显示“Docker version 17.09.0-ce, build afdb6d4”字样，表示安装成功。

<h4>二、docker-compose安装</h4>

<h5>1，下载docker-compose</h5>

<pre><code class="language-shell ">$ sudo curl -L https://github.com/docker/compose/releases/download/1.17.0/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose
</code></pre>

<h5>2，授权</h5>

<pre><code class="language-shell ">$ sudo chmod +x /usr/local/bin/docker-compose
</code></pre>

<h5>3，查看版本信息</h5>

<pre><code class="language-shell ">$ docker-compose --version
</code></pre>

显示出版本信息，即安装成功。

<h4>三、docker-machine安装</h4>

说明：docker-machine的使用是要基于virtualBox的。如果没有安装安装过，请先安装virtualBox。

<h5>1，安装virtualBox</h5>

登录virtualBox官网：https://www.virtualbox.org/wiki/Linux_Downloads

找到"Ubuntu 16.04 ("Xenial")  i386 |  AMD64"字样，点击“AMD64”进行下载。

下载后，执行以下命令进行安装：

<pre><code class="language-shell ">$ sudo dpkg -i virtualbox-5.2_5.2.0-118431_Ubuntu_xenial_amd64.deb
</code></pre>

<h5>2，下载并安装docker-machine</h5>

<pre><code class="language-shell ">$ curl -L https://github.com/docker/machine/releases/download/v0.13.0/docker-machine-`uname -s`-`uname -m` &gt;/tmp/docker-machine &amp;&amp;
chmod +x /tmp/docker-machine &amp;&amp;
sudo cp /tmp/docker-machine /usr/local/bin/docker-machine
</code></pre>

<h5>3，查看版本信息</h5>

<pre><code class="language-shell ">$ docker-machine version
</code></pre>

显示出版本信息，即安装成功。

转自：https://www.cnblogs.com/tianhei/p/7802064.html
    