---
layout: post
title: PHP中__get()和__set()的用法实例详解
date: 2018/08/07 18:08
categories: 程序开发
tags: php
excerpt: h4PHP中get和set的用法实例详解h4precodePHP中的get和set的实用方法codepre转载php面向对象codegetcodecodesetcode的用法一般来说总是把类的属性定义为private这更符合现实的逻辑但是对属性的读取和赋值操作是非常频繁的因此在PHP5中预定义了两个函数codegetcode和codesetcode来获取和赋值其属性类似于java中的javabea
comment: true
---

* content
{:top}

#### PHP中__get()和__set()的用法实例详解

    
    
    PHP中的__get()和__set()的实用方法
    

【转载】php面向对象`_get()`,`_set()`的用法
一般来说，总是把类的属性定义为private，这更符合现实的逻辑。但是，对属性的读取和赋值操作是非常频繁的，因此在PHP5中，预定义了两个函数`__get()`和`__set()`来获取和赋值其属性。类似于java中的javabean的操作，使用的方法也类似，只是不需要像javabean中那样，对每个字段进行set和get的操作。只需要加上两个魔术方法即可。即私有成员的设值和取值的操作。在PHP5中给我们提供了专门为属性设置值和获取值的方法，`__set()`和`__get()`这两个方法，这两个方法不是默认存在的，而是我们手工添加到类里面去的，像构造方法(`__construct()`)一样,类里面添加了才会存在，可以按下面的方式来添加这两个方法，当然也可以按个人的风格来添加：

    
    
      
    //__set()方法用来设置私有属性 
    public function __set($name,$value){ 
    $this->$name = $value; 
    } 
    //__get()方法用来获取私有属性 
    public function __get($name){ 
    return $this->$name; 
    } 
    

**__get()方法:**
这个方法用来获取私有成员属性值的,有一个参数，参数传入你要获取的成员属性的名称，返回获取的属性值，这个方法不用我们手工的去调用，因为我们也可以把这个方法做成私有的方法，是在直接获取私有属性的时候对象自动调用的。因为私有属性已经被封装上了，是不能直接获取值的，但是如果你在类里面加上了这个方法，在使用`“echo$p1->name”`这样的语句直接获取值的时候就会自动调用`__get($name)`方法，将属性`name`传给参数`$name`，通过这个方法的内部执行，返回我们传入的私有属性的值。如果成员属性不封装成私有的，对象本身就不会去自动调用这个方法。
**__set()方法:** 这个方法用来为私有成员属性设置值的，有两个参数， \- 第一个参数为你要为设置值的属性名， \-
第二个参数是要给属性设置的值，没有返回值。
这个方法同样不用我们手工去调用，它也可以做成私有的，是在直接设置私有属性值的时候自动调用的，同样属性私有的已经被封装上
了，如果没有`__set()`这个方法，是不允许的，比如：

    
    
    $this->name=‘zhangsan',
    

这样会出错，但是如果你在类里面加上了`__set($property_name,
$value)`这个方法，在直接给私有属性赋值的时候，就会自动调用它，把属性比如`name`传给`$property_name`,把要赋的值`“zhangsan”`传给`$value`，通过这个方法的执行，达到赋值的目的。如果成员属性不封装成私有的，对象本身就不会去自动调用这个方法。为了不传入非法的值，还可以在这个方法给做一下判断。代码如下：

    
    
    <?php 
    class Person 
    { 
    //下面是人的成员属性，都是封装的私有成员 
    private $name; //人的名子 
    private $sex; //人的性别 
    private $age; //人的年龄 
    //__get()方法用来获取私有属性 
    private function __get($property_name) 
    { 
    echo "在直接获取私有属性值的时候，自动调用了这个__get()方法<br>"; 
    if(isset($this->$property_name)) 
    { 
    return($this->$property_name); 
    } 
    else 
    { 
    return(NULL); 
    } 
    } 
    //__set()方法用来设置私有属性 
    private function __set($property_name, $value) 
    { 
    echo "在直接设置私有属性值的时候，自动调用了这个__set()方法为私有属性赋值<br>"; 
    $this->$property_name = $value; 
    } 
    } 
    $p1=newPerson(); 
    //直接为私有属性赋值的操作，会自动调用__set()方法进行赋值 
    $p1->name="张三"; 
    $p1->sex="男"; 
    $p1->age=20; 
    //直接获取私有属性的值，会自动调用__get()方法，返回成员属性的值 
    echo "姓名：".$p1->name."<br>"; 
    echo "性别：".$p1->sex."<br>"; 
    echo "年龄：".$p1->age."<br>"; 
    ?> 
    

##### 程序执行结果：

在直接设置私有属性值的时候，自动调用了这个`__set()`方法为私有属性赋值  
在直接设置私有属性值的时候，自动调用了这个`__set()`方法为私有属性赋值  
在直接设置私有属性值的时候，自动调用了这个`__set()`方法为私有属性赋值  
在直接获取私有属性值的时候，自动调用了这个`__get()`方法  
姓名：张三  
在直接获取私有属性值的时候，自动调用了这个`__get()`方法  
性别：男  
在直接获取私有属性值的时候，自动调用了这个`__get()`方法  
年龄：20  
以上代码如果不加上`__get()`和`__set()`方法，程序就会出错，因为不能在类的外部操作私有成员，而上面的代码是通过自动调用`__get()`和`__set()`方法来帮助我们直接存取封装的私有成员的。


    