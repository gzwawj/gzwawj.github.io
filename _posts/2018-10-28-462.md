---
layout: post
title:  php出现session_start()错误
date:   2018/10/28 15:03
categories:  程序开发
tags: php 
excerpt:    php报错：session_start(): Cannot start session with empty session ID   解决问题的几种方法  方法一  &lt;?php     function my_session_start()     {         if (ini_get('session.use_cookies') &amp;&amp; isset($_COOK
comment: true
---
* content
{:top}

<blockquote>
  php报错：session_start(): Cannot start session with empty session ID
</blockquote>

解决问题的几种方法

<h2>方法一</h2>

<pre><code class="language-php ">&lt;?php
    function my_session_start()
    {
        if (ini_get('session.use_cookies') &amp;&amp; isset($_COOKIE['PHPSESSID'])) {
            $sessid = $_COOKIE['PHPSESSID'];
        } elseif (!ini_get('session.use_only_cookies') &amp;&amp; isset($_GET['PHPSESSID'])) {
            $sessid = $_GET['PHPSESSID'];
        } else {
            session_start();
            return false;
        }

        if (!preg_match('/^[a-z0-9]{32}$/', $sessid)) {
            return false;
        }
        session_start();

        return true;
    }
?&gt;
</code></pre>

<h2>方法二</h2>

<pre><code class="language-php ">try {
   session_start();
} catch(ErrorExpression $e) {
   session_regenerate_id();
   session_start();
}
</code></pre>

<h2>方法三</h2>

<pre><code class="language-php ">function my_session_start()
{
      $sn = session_name();
      if (isset($_COOKIE[$sn])) {
          $sessid = $_COOKIE[$sn];
      } else if (isset($_GET[$sn])) {
          $sessid = $_GET[$sn];
      } else {
          return session_start();
      }

     if (!preg_match('/^[a-zA-Z0-9,\-]{22,40}$/', $sessid)) {
          return false;
      }
      return session_start();
}

if ( !my_session_start() ) {
    session_id( uniqid() );
    session_start();
    session_regenerate_id();
}
</code></pre>

<h2>方法四</h2>

<pre><code class="language-php ">&lt;?php
    function my_session_start()
    {
        $sn = session_name();
        if (isset($_COOKIE[$sn])) {
            $sessid = $_COOKIE[$sn];
        } else if (isset($_GET[$sn])) {
            $sessid = $_GET[$sn];
        } else {
            session_start();
            return false;
        }

       if (!preg_match('/^[a-zA-Z0-9,\-]{22,40}$/', $sessid)) {
            return false;
        }
        session_start();

       return true;
    }
?&gt;
</code></pre>

<h2>方法五</h2>

<pre><code class="language-php ">$ok = @session_start();
if(!$ok){
session_regenerate_id(true); // replace the Session ID
session_start(); 
}
</code></pre>

原文地址：<a href="https://stackoverflow.com/questions/32898857/session-start-issues-regarding-illegal-characters-empty-session-id-and-failed">session_start</a>
    